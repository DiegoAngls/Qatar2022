library(dplyr)
library(readr)
read_csv("GS1_picks.csv")
picks <- read_csv("GS1_picks.csv")
View(picks)
View(picks)
picks <- read_csv("GS1_picks.csv")
View(picks)
View(picks)
library(googledrive)
?drive_find
matches <- drive_find(pattern = "matches.csv"),type = "spreadsheet",n_max=1)
matches <- drive_find(pattern = "matches.xlsx"),type = "spreadsheet",n_max=1)
matches <- drive_find(pattern = "matches.xlsx",type = "spreadsheet",n_max=1)
matches
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)
matches
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches
matches <- read_sheet(matches)
library(googlesheets4)
library(googledrive)
library(dplyr)
library(readr)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
picks <- read_csv("GS1_picks.csv")
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches <- read_sheet(matches)
View(matches)
View(matches)
View(picks)
View(picks)
View(picks)
View(picks)
?pivot_longer
library(tidyr)
library(tidyr)
library(readr)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
picks <- read_csv("GS1_picks.csv") %>%
pivot_longer(,picks)
View(picks)
View(picks)
picks <- read_csv("GS1_picks.csv") %>%
pivot_longer(names_to = "Match",
values_to = "Pick",3:18)
picks <- read_csv("GS1_picks.csv") %>%
pivot_longer(names_to = "Match",
values_to = "Pick",3:18)
View(picks)
View(picks)
View(picks)
View(picks)
picks <- read_csv("GS1_picks.csv") %>%
pivot_longer(names_to = "Match",
values_to = "Pick",3:18)%>%
group_by(match)
View(matches)
View(picks)
View(picks)
picks <- read_csv("GS1_picks.csv") %>%
pivot_longer(names_to = "Match",
values_to = "Pick",3:18)%>%
nest(-Match)
View(picks)
View(picks)
View(picks[[2]][[1]])
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches <- read_sheet(matches) %>%
filter(complete.cases(.))
matches <- read_sheet(matches) %>%
filter(complete.cases(.))
View(matches)
View(matches)
View(matches)
View(matches)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
picks <- read_csv("GS1_picks.csv") %>%
pivot_longer(names_to = "Match",
values_to = "Pick",3:18)%>%
nest(-Match)
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches <- read_sheet(matches) %>%
filter(complete.cases(.))
View(matches)
View(matches)
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_local - Goals_visitor))
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_local - Goals_visitor))
View(matches)
View(matches)
picks <- read_csv("GS1_picks.csv") %>%
pivot_longer(names_to = "Match",
values_to = "Pick",3:18)%>%
nest(-Match)
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_local - Goals_visitor))
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
View(matches)
View(matches)
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
matches
Result= matches$Result
library(purrr)
map(1:nrows(matches),x)
map(1:nrows(matches),.x)
map(1:nrows(matches),~.x)
map(1:nrow(matches),~.x)
picks
picks$data[[1]]
map(1:nrow(matches),~function(x) {
map(1:nrow(matches),~function(x) {
logpicks$data[[.x]] == matches$Result[.x]
return(log)}
)
map(1:nrow(matches),~function(.x) {
logpicks$data[[.x]] == matches$Result[.x]
return(log)}
)
map(1:nrow(matches),~function(.x) {
logpicks$data[[.x]] == matches$Result[.x]
return(log)}
)
map(1:nrow(matches),~function(.x) {
log <- picks$data[[.x]] == matches$Result[.x]
return(log)}
)
map(1:nrow(matches),~function(.x) {
log <- picks$data[[.x]] == matches$Result[.x]
return(log)})
x <- map(1:nrow(matches),~function(.x) {
log <- picks$data[[.x]] == matches$Result[.x]
return(log)})
x
Result <-  matches$Result
map(1:length(Result),.x)
map(1:length(Result),~.x)
View(picks)
View(picks)
View(picks[[2]][[1]])
map(1:length(Result),~.x == picks[[.x]]$data$Pick)
map(1:length(Result),~.x== picks[[.x]]$data$Pick)
map(1:length(Result),~.x==picks[[.x]]$data$Pick)
map(1:length(Result),picks[[.x]]$Pick)
map(1:length(Result),~picks[[.x]]$Pick)
map(1:length(Result),~print(picks[[.x]]$Pick))
map(1:length(Result),~print(picks[[.x]]))
map(1:length(Result),~print(picks[[.x]]$Pick))
map(1:length(Result),~print(picks[.x]$Pick))
map(1:length(Result),~print(picks[.x]$`Pick))
View(matches)
View(matches)
View(matches)
View(matches)
View(matches)
map(1:length(Result),~print(picks[[.x]]$`Pick))
map(1:length(Result),~print(picks[[.x]][[5]]))
~print(picks$data[[.x]]$Pick
map(1:length(Result),
map(1:length(Result),
~print(picks$data[[.x]]$Pick))
map(1:length(Result),
~print(picks$data[[.x]]$Pick))
map(1:length(Result),Result[.x] ==picks$data[[.x]]$Pick))
map(1:length(Result),Result[.x] == picks$data[[.x]]$Pick))
map(1:length(Result),~Result[.x] == picks$data[[.x]]$Pick))
map(1:length(Result),~Result[.x] == picks$data[[.x]]$Pick)
View(matches)
View(picks)
View(picks)
picks <- read_csv("GS1_picks.csv")
picks <- read_csv("GS1_picks.csv")
View(picks)
View(picks)
picks <- read_csv("GS1_picks.csv") %>%
select(-Round)
View(picks)
View(picks)
picks[,1] = Result[1]
picks[,1] = Result[1]
picks <- read_csv("GS1_picks.csv") %>%
select(-Round)
picks[,1] ==esult[1]
picks[,1] == Result[1]
picks2 <- select(picks,-1:2)
picks2 <- select(picks,-c(1,2))
View(picks2)
View(picks2)
result <- matches$Result
map(1:length(result),~result[.x])
map(1:length(result),~result[.x] == picks2[,.x])
map_dfc(1:length(result),~result[.x] == picks2[,.x])
scores <- map_dfc(1:length(result),~result[.x] == picks2[,.x])
View(scores)
View(scores)
scores <- map_dfc(1:length(result),~result[.x] == picks2[,.x]) %>%
rowSums()
attach(picks)
scores <- map_dfc(1:length(result),~result[.x] == picks2[,.x]) %>%
rowSums()
picks2
picks2 <- select(picks,-c(1,2)) %>%
as.matrix()
picks2 <- select(picks,-c(1,2)) %>%
matrix()
picks2
picks2 <- select(picks,-c(1,2))
scores <- map_dfc(1:length(result),~result[.x] == picks2[,.x]) %>%
rowSums()
picks
scores
Nombre
data.frame(ID_participante,puntos)
picks$numero_participante
data.frame(numero_participante,Nombre,puntos)
puntos <- map_dfc(1:length(result),~result[.x] == picks2[,.x]) %>%
rowSums()
scores
data.frame(numero_participante,Nombre,puntos)
x <- map_dfc(1:length(result),~result[.x] == picks2[,.x])
x
data.frame(numero_participante,Nombre,puntos)
?write_csv
write_csv(scores,"scores.csv",quote = F)
scores <- data.frame(numero_participante,Nombre,puntos)
write_csv(scores,"scores.csv",quote = F)
write.table(scores,"scores.csv",quote = F,sep=",",row.names = F)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
picks <- read_csv("GS1_picks.csv") %>%
select(-Round)
attach(picks)
detch(picks)
detach(picks)
detech(picks)
detach(picks)
detach(picks)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
picks <- read_csv("GS1_picks.csv") %>%
select(-Round)
attach(picks)
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
result <- matches$Result
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
View(matches)
View(matches)
picks2 <- select(picks,-c(1,2))
picks2
puntos <- map_dfc(1:length(result),~result[.x] == picks2[,.x]) %>%
rowSums()
puntos <- map_dfc(1:length(result),~result[.x] == picks2[,.x]) %>%
rowSums()
result <- matches$Result
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
library(googlesheets4)
library(googledrive)
library(dplyr)
library(tidyr)
library(readr)
library(purrr)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
picks <- read_csv("GS1_picks.csv") %>%
select(-Round)
attach(picks)
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
result <- matches$Result
picks2 <- select(picks,-c(1,2))
puntos <- map_dfc(1:length(result),~result[.x] == picks2[,.x]) %>%
rowSums()
scores <- data.frame(numero_participante,Nombre,puntos)
write.table(scores,"scores.csv",quote = F,sep=",",row.names = F)
source("~/Documents/Qatar2022/score_picks.R")
View(matches)
View(matches)
scores <- data.frame(numero_participante,Nombre,puntos) %>%
arrange(desc(punts))
scores <- data.frame(numero_participante,Nombre,puntos) %>%
arrange(desc(puntos))
View(scores)
View(scores)
write.table(scores,"scores.csv",quote = F,sep=",",row.names = F)
M1 <- matches %>%
filter (Round == "M1")
View(M1)
View(M1)
source("~/Documents/Qatar2022/score_picks.R")
rm(list = ls())
source("~/Documents/Qatar2022/score_picks.R")
M1
M1 <- matches %>%
filter (Round == "M1") %>%
select(Result) %>%
as.vector()
M1 <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x]) %>%
rowSums()
rm(list = ls())
source("~/Documents/Qatar2022/score_picks.R")
source("~/Documents/Qatar2022/score_picks.R")
View(matches)
View(matches)
source("~/Documents/Qatar2022/score_picks.R")
source("~/Documents/Qatar2022/score_picks.R")
View(matches)
View(matches)
View(matches)
View(matches)
View(scores)
View(scores)
M1 <- matches %>%
filter (Round == "M1") %>%
select(Result) %>%
as.vector()
M1
M1 <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x]) %>%
rowSums()
M1
M1 <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x])
M1 <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x]))
M1
library(googlesheets4)
library(googledrive)
library(dplyr)
library(tidyr)
library(readr)
library(purrr)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
picks <- read_csv("GS1_picks.csv") %>%
select(-Round)
attach(picks)
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
picks2 <- select(picks,-c(1,2))
M1 <- matches %>%
filter (Round == "M1") %>%
select(Result) %>%
as.vector()
M1 <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x])
M1
M1 <- map_df(1:length(M1),~M1[.x] == picks2[,.x])
M1 <- map_df(1:length(M1),~M1[.x] == picks2[,.x])
M1 <- matches %>%
filter (Round == "M1") %>%
select(Result) %>%
as.vector()
M1
M1 <- map(1:length(M1),~M1[.x] == picks2[,.x])
M1
M1
M1 <- matches %>%
filter (Round == "M1") %>%
select(Result) %>%
as.vector()
M1 <- matches %>%
filter (Round == "M1") %>%
select(Result) %>%
as.vector() %>%
unlist()
M1
M1 <- map(1:length(M1),~M1[.x] == picks2[,.x])
M1
M1 <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x])
View(M1)
View(M1)
View(M1)
View(M1)
source("~/Documents/Qatar2022/score_picks.R")
M1 <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x])
source("~/Documents/Qatar2022/score_picks.R")
View(M1)
View(M1)
source("~/Documents/Qatar2022/score_picks.R")
scores <- data.frame(numero_participante,Nombre,M1) %>%
group_by (numero_participante) %>%
mutate(Total = sum(M1)) %>%
ungroup %>%
arrange(desc(Total))
View(scores)
View(scores)
source("~/Documents/Qatar2022/score_picks.R")
library(googlesheets4)
library(googledrive)
library(dplyr)
library(tidyr)
library(readr)
library(purrr)
# read the data
options(gargle_oauth_email = TRUE)
drive_auth(email = TRUE)
# Calificar la ronda 1
picks <- read_csv("GS1_picks.csv") %>%
select(-Round)
attach(picks)
matches <- drive_find(pattern = "matches",type = "spreadsheet",n_max=1)$id
matches <- read_sheet(matches) %>%
filter(complete.cases(.)) %>%
mutate(GD = abs(Goals_Local - Goals_Visitor))
picks2 <- select(picks,-c(1,2))
M1 <- matches %>%
filter (Round == "M1") %>%
select(Result) %>%
as.vector() %>%
unlist()
M1_all <- map_dfc(1:length(M1),~M1[.x] == picks2[,.x]) %>%
M1 <- rowSums(M1)
